# 6.824-Distributed-Systems
https://pdos.csail.mit.edu/6.824/index.html


# 1.课程介绍

---

#####什么是分布式系统？
* 多个协同工作的计算机
* DNS服务器、P2P文件共享、大型数据库、MapReduce模型等等
* 许多关键的基础设施是分布式的

#####为什么要是分布式
* 为了连接物理隔离的计算机
* 为了通过隔离获得安全性
* 为了通过复制容忍错误
* 为了通过并行CPU/内存/磁盘/网络 提高生产力

#####缺点
* 复杂：许多并行的部分
* 必须处理局部的错误
* 难以充分利用潜在的性能

#####为什么参加这堂课程
* 对困难问题和无结局方案的问题感兴趣
* 由于网站的增长导致需要将应用分布式于实际系统 
* 活跃的研究领域：分布式领域有仍在增加的未解决的问题
* 动手实践：你将会自动动手完成一个分布式系统

[http://pdos.csail.mit.edu/6.824](http://pdos.csail.mit.edu/6.824)

课程包含观点 论文和实验

阅读：在课程开始前需要先阅读论文，每个论文有一个简短的问题。

实验目标：深入理解重要的技术；分布式编程经验

* 实验 1: MapReduce
* 实验 2: 通过复制容忍错误
* 实验 3: 容错的key/value存储
* 实验 4: 共享的key/value存储

实验完成的标准：测试用例通过

#主要话题

这是一个关于基础设施的课程，这些基础设施将为应用提供服务。
    摘要隐藏了应用所使用的分布式系统的复杂性
    
* 存储
* 通信
* 计算

实现：RPC(远程程序调用)、threads（线程）、并发控制

**性能**
目标：可伸缩的服务
Nx servers -> Nx total throughput via parallel CPU, disk, net.
所以，更多的负载只能依靠购买更多的计算机。
伸缩日益变得困难，因为：
负载均衡、离群者。
很小的非并行的部分
隐藏共享资源，如网络

**错误容忍**
服务器、复杂网络，通常总会有不能正常工作的资源。分布式系统在为应用提供服务时需要隐藏这些错误，我们通常想要：

* 可用性  随时可以使用文件而不管是否发生错误
* 持久性  错误被修复后可以正常工作

有一个好主意：复制到其他服务器，如果一个服务器崩溃后，客户端可以使用其他服务器。

**一致性**
通用的基础设施需要良好的定义其行为。例如：Get(k)从最新的Put(k,v)获取值。
但是，实现良好的行为是很难的！因为：

* 客户端提交并行操作
* 服务器会在某些时刻崩溃
* 网络可能不能连接到正常运行的服务器

除此之外，一致性和性能也很难达到：

* 一致性需要通信，例如：获得最新的Put()值
* 令人满意的系统（“严格的”）的语义往往是缓慢的。
* 快速的系统通常使得应用需要复杂的行为。

**MapReduce**
使用场景：多台计算机处理多个TB基本的数据集，例如：分析爬虫获取的海量网站页面时，如果没有好心人（哈哈）开发的分布式系统，会让人很痛苦（比如：复制错误）。
全局目标：非专业的编程者可以很容易并有效的分析处理大数据。
开发者需要定义Map和Reduce函数
MR运行在1000多台机器上，输入量巨大，同时隐藏了分布式的所有细节。

**MapReduce预览**
输入被拆分为“splits”
```ruby
Input Map -> a,1 b,1 c,1
Input Map ->     b,1
Input Map -> a,1     c,1
              |   |   |
                  |   -> Reduce -> c,2
                  -----> Reduce -> b,2
```
MR调用在每个split处调用Map()，产生了集合k2,v2的中间数据
MR收集所有key为k2的中间数据，将其值v2传递个Reduce
最后，Reduce输出了<k2,v3>对。

例如：字数统计,输入是许多文本文件
```javascript
Map(k, v)
    split v into words
    for each word w
      emit(w, "1")
 Reduce(k, v)
    emit(len(v))
```
MapReduce模型很容易编程，他隐藏了许多令人痛苦的细节：
* 并发--与顺序执行具有同样的结果
* 开始服务器的s/w
* 数据移动
* 错误

MapReduce模型伸缩性很好。
Map()函数并不会相互等待或共享数据，可以并行处理。Reduce()函数也是一样。所以，更多的机器可以提供更多的生产力。

**性能的限制因素**
系统优化时，我们所关心的是CPU？内存？磁盘？网络？
https://pdos.csail.mit.edu/6.824/notes/l01.txt

